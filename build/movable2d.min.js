// Movable2d.js r1 - http://github.com/rdad/movable2d.js
(function(l){var c=function(){this.add_data_to="";this.container=document.body};c.prototype={set:function(b){this.add_data_to=b.add_data_to?b.add_data_to:"";this.container=b.container?b.container:document.body;return this},apply:function(b){if(b&&!b.is_movable){var c,a,e=!1,i=0,j=0,k=Array.prototype.slice.call(document.defaultView.getComputedStyle(document.body,"")).join("").match(/(?:-(moz|webkit|ms|khtml)-)/),h=k[0],d=k[1];a=b.prototype?b.prototype:b;""!=this.add_data_to&&(c=a,b={});a.is_movable=
!0;a.x=0;a.y=0;a.r=0;a.s=1;"undefined"==typeof a.elem&&(a.elem=document.createElement("div"));a.elem.style.cssText="position:absolute; "+h+"backface-visibility: hidden; "+h+"transform: translateZ(0);";this.container.appendChild(a.elem);a.elem.addEventListener(d+"TransitionEnd",function(m){a.on_animation_end(m)},!1);a.position=function(a,f){this.x=a;this.y=f;this.render();return this};a.rotation=function(a){this.r=a;this.render();return this};a.scale=function(a){this.s=a;this.render();return this};
a.render=function(){this.elem.style[d+"Transform"]="translate3d("+this.x+"px,"+this.y+"px, 0) rotateZ("+this.r+"deg) scale3d("+this.s+","+this.s+",0)"};a.move_to=function(a,f,b,c){window.setTimeout(function(b,g){b.x=a;b.y=f;b.on_animation_start(g.d,g.e);b.render()},0,this,{x:a,y:f,d:b,e:c});return this};a.transform=function(a,b,c,d){window.setTimeout(function(a,b){a.r=b.r;a.s=b.s;a.on_animation_start(b.d,b.e);a.render()},0,this,{r:a,s:b,d:c,e:d});return this};a.animate=function(a,b,c,d,e,g){window.setTimeout(function(a,
b){a.x=b.x;a.y=b.y;a.r=b.r;a.s=b.s;a.on_animation_start(b.d,b.e);a.render()},0,this,{x:a,y:b,r:c,s:d,d:e,e:g});return this};a.direction_to=function(a,b,c){e=true;i=a;j=b;this.step_direction();this.on_animation_start(1E3/c,"linear");this.render();return this};a.direction_stop=function(){e=false;return this};a.step_direction=function(){this.x=this.x+i;this.y=this.y+j;return this};a.on_animation_start=function(a,b){this.elem.style[d+"Transition"]=h+"transform "+(a?a+"ms":"1s")+" "+(b?b:"ease-in-out")};
a.on_animation_end=function(){if(e==true){this.step_direction();this.render()}else{this.elem.style[d+"Transition"]=null;this.elem.dispatchEvent(new CustomEvent("animation_end",{detail:{self:this,x:this.x,y:this.y,r:this.r,s:this.s}}))}};""!=this.add_data_to&&(c[this.add_data_to]=b);return this}}};l.movable2d=new c})(window);
