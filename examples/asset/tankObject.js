// tankObject.js r0 - http://github.com/rdad/tankObject.js
(function(e){var c,a,d=function(b,a){this.classe=b;this.free_list=[];this.nb_used=this.nb_total=0;this.config={locked:!1,auto_expend:!0,expention_rate:20,init:null};var c=a=a||{};"undefined"!=typeof c.init&&(this.init=c.init);"undefined"!=typeof c.quantity_on_start&&this.expand(c.quantity_on_start)};d.prototype={get:function(){c=arguments;if(0==this.free_list.length)if(this.config.auto_expend)this.expand();else{console.log("No more object available ("+this.nb_total+" in use)");return}a=this.free_list.pop();
this.nb_used++;0<c.length&&this.classe.apply(a,c);this.nb_used=this.nb_total-this.free_list.length;return a},release:function(a){this.free_list.push(a);this.nb_used=this.nb_total-this.free_list.length},get_nb_free:function(){return this.nb_total-this.nb_used},get_nb_used:function(){return this.nb_used},get_nb_total:function(){return this.nb_total},expand:function(b){if(!0==this.config.locked)console.log("No expention: tank locked");else{"undefined"==typeof b&&(b=~~(0.01*this.nb_total*this.config.expention_rate));
b=0<b?b:1;console.log("expand + "+b);for(this.nb_total+=b;b--;)"function"!=typeof this.classe?console.log("Can't instanciate: bad classe object"):(a=new this.classe,"undefined"!=typeof a.init?a.init():this.config.init&&this.config.init.apply(a),this.free_list.push(a))}},clear:function(){!0===this.config.locked?console.log("tank locked"):this.free_list.length=this.nb_total=this.nb_used=0},locked:function(){this.config.locked=!0},unlocked:function(){this.config.locked=!1}};a={};c=[];e.TankObject=d})(window);
